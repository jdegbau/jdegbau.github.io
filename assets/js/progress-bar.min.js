let processScroll = () => { let postBody = document.querySelector('.post-body'); if (!postBody) return; let rect = postBody.getBoundingClientRect(); let windowHeight = window.innerHeight; let postBodyTop = rect.top; let postBodyHeight = rect.height; let scrollProgress = (windowHeight - postBodyTop) / (windowHeight + postBodyHeight); scrollProgress = Math.max(0, Math.min(1, scrollProgress)); let width = scrollProgress * 100; document.getElementById("progress-bar").style.width = width + "%" }; document.addEventListener("scroll", processScroll);